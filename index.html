<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>æˆ¿è²¸è©¦ç®—å·¥å…·</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 30px; max-width: 600px; margin: auto; }
    label, select, input, button { display: block; margin: 10px 0; width: 100%; }
    #result { margin-top: 20px; font-weight: bold; }
  </style>
</head>
<body>
  <h2>æˆ¿è²¸è©¦ç®—å·¥å…·</h2>

  <label>è²¸æ¬¾é‡‘é¡ï¼ˆè¬å…ƒï¼‰</label> <!-- ğŸ”´ èª¿æ•´ï¼šé¡¯ç¤ºå–®ä½ç‚ºè¬å…ƒ -->
  <input type="number" id="loanAmount" placeholder="è«‹è¼¸å…¥è²¸æ¬¾é‡‘é¡">

  <label>è²¸æ¬¾å¹´é™</label>
  <input type="number" id="loanYears" placeholder="è«‹è¼¸å…¥å¹´æ•¸ï¼ˆä¾‹å¦‚ 20ï¼‰">

  <label>é¸æ“‡éŠ€è¡Œï¼ˆè‡ªå‹•å¸¶å…¥åˆ©ç‡ï¼‰</label>
  <select id="bankSelect" onchange="setRate()">
    <option value="">-- è«‹é¸æ“‡ --</option>
    <option value="1.68">å°ç£éŠ€è¡Œï¼ˆ1.68%ï¼‰</option>
    <option value="1.75">åœŸåœ°éŠ€è¡Œï¼ˆ1.75%ï¼‰</option>
    <option value="1.82">åˆä½œé‡‘åº«ï¼ˆ1.82%ï¼‰</option>
    <option value="1.90">ç¬¬ä¸€éŠ€è¡Œï¼ˆ1.90%ï¼‰</option>
    <option value="1.95">è¯å—éŠ€è¡Œï¼ˆ1.95%ï¼‰</option>
    <option value="2.05">å°æ–°éŠ€è¡Œï¼ˆ2.05%ï¼‰</option>
    <option value="2.10">ä¸­åœ‹ä¿¡è¨—ï¼ˆ2.10%ï¼‰</option>
    <option value="2.15">ç‰å±±éŠ€è¡Œï¼ˆ2.15%ï¼‰</option>
    <option value="2.20">åœ‹æ³°ä¸–è¯ï¼ˆ2.20%ï¼‰</option>
    <option value="2.25">æ°¸è±éŠ€è¡Œï¼ˆ2.25%ï¼‰</option>
    <option value="1.85">è¾²æœƒï¼ˆ1.85%ï¼‰</option>
  </select>

  <label>æˆ–è‡ªè¡Œè¼¸å…¥åˆ©ç‡ï¼ˆ%ï¼‰</label>
  <input type="number" step="0.01" id="customRate" placeholder="ä¾‹å¦‚ï¼š1.88">

  <label>é‚„æ¬¾æ–¹å¼</label>
  <select id="repaymentType">
    <option value="equal">æœ¬æ¯å¹³å‡ï¼ˆç­‰é¡æœ¬æ¯ï¼‰</option>
    <option value="principal">æœ¬é‡‘å¹³å‡ï¼ˆç­‰é¡æœ¬é‡‘ï¼‰</option>
  </select>

  <button onclick="calculate()">è©¦ç®—</button>

  <div id="result"></div>

  <script>
    function setRate() {
      const rate = document.getElementById('bankSelect').value;
      document.getElementById('customRate').value = rate;
    }

    function calculate() {
      // ğŸ”´ èª¿æ•´ï¼šæŠŠè¬å…ƒè½‰æˆå…ƒ
      const loanAmount = parseFloat(document.getElementById('loanAmount').value) * 10000;
      const loanYears = parseInt(document.getElementById('loanYears').value);
      const interestRate = parseFloat(document.getElementById('customRate').value);
      const repaymentType = document.getElementById('repaymentType').value;

      if (!loanAmount || !loanYears || !interestRate) {
        alert("è«‹è¼¸å…¥å®Œæ•´è³‡è¨Šï¼");
        return;
      }

      const monthlyRate = interestRate / 100 / 12;
      const totalMonths = loanYears * 12;
      let resultHTML = "";

      if (repaymentType === "equal") {
        const monthlyPayment = (loanAmount * monthlyRate * Math.pow(1 + monthlyRate, totalMonths)) / 
                               (Math.pow(1 + monthlyRate, totalMonths) - 1);
        const totalPayment = monthlyPayment * totalMonths;
        const totalInterest = totalPayment - loanAmount;

        resultHTML += `<p>ã€ç­‰é¡æœ¬æ¯ã€‘</p>`;
        resultHTML += `æ¯æœˆæ‡‰ç¹³é‡‘é¡ï¼š<span style="color:green;">${monthlyPayment.toFixed(0)} å…ƒ</span><br>`;
        resultHTML += `ç¸½é‚„æ¬¾é‡‘é¡ï¼š${totalPayment.toFixed(0)} å…ƒ<br>`;
        resultHTML += `ç¸½åˆ©æ¯é‡‘é¡ï¼š${totalInterest.toFixed(0)} å…ƒ<br>`;

      } else {
        const monthlyPrincipal = loanAmount / totalMonths;
        let totalPayment = 0;
        let firstMonth = 0;

        for (let i = 0; i < totalMonths; i++) {
          const interest = (loanAmount - monthlyPrincipal * i) * monthlyRate;
          const monthly = monthlyPrincipal + interest;
          if (i === 0) firstMonth = monthly;
          totalPayment += monthly;
        }

        const totalInterest = totalPayment - loanAmount;

        resultHTML += `<p>ã€ç­‰é¡æœ¬é‡‘ã€‘</p>`;
        resultHTML += `é¦–æœˆæ‡‰ç¹³é‡‘é¡ï¼š<span style="color:green;">${firstMonth.toFixed(0)} å…ƒ</span><br>`;
        resultHTML += `ç¸½é‚„æ¬¾é‡‘é¡ï¼š${totalPayment.toFixed(0)} å…ƒ<br>`;
        resultHTML += `ç¸½åˆ©æ¯é‡‘é¡ï¼š${totalInterest.toFixed(0)} å…ƒ<br>`;
      }

      document.getElementById('result').innerHTML = resultHTML;
    }
  </script>
</body>
</html>
